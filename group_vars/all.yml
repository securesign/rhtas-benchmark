# Baseline Infrastructure Configuration
---
baseline:
  namespace: "tas-monitoring"
  instance_name: "securesign-sample"

template_to_deploy: "securesign-cr.yml.j2"

k6_test_namespace: "k6-tests"
k6_sign_script_path: "./k6-scripts/tas-perf-sign-template.js"
k6_verify_script_path: "./k6-scripts/tas-perf-verify-template.js"

oidc:
  client_id: "trusted-artifact-signer"
  type: "email"

path_to_k8s_configs: "{{ playbook_dir }}"

certificates:
  organization_name: "Red Hat"
  organization_email: "{{ certificates_org_email | default('jdoe@redhat.com') }}"
  
  fulcio:
    common_name: "fulcio.hostname"
    
  tsa:
    common_name: "tsa.hostname"

storage:
  tuf_size: "100Mi"
  trillian_database_size: "10Gi"

resources:
  trillian_database:
    requests: { cpu: "2000m", memory: "1Gi" }
    limits:   { cpu: "4500m", memory: "2Gi" }
  trillian_logserver:
    requests: { cpu: "2000m", memory: "128Mi" }
    limits:   { cpu: "4500m", memory: "512Mi" }
  trillian_logsigner:
    requests: { cpu: "100m", memory: "128Mi" }
    limits:   { cpu: "1000m", memory: "256Mi" }
  rekor:
    requests: { cpu: "1250m", memory: "128Mi" }
    limits:   { cpu: "2500m", memory: "512Mi" }
  fulcio:
    requests: { cpu: "750m", memory: "128Mi" }
    limits:   { cpu: "1500m", memory: "256Mi" }
  ctlog:
    requests: { cpu: "250m", memory: "128Mi" }
    limits:   { cpu: "1000m", memory: "256Mi" }
  tsa:
    requests: { cpu: "100m", memory: "128Mi" }
    limits:   { cpu: "500m", memory: "256Mi" }

components:
  fulcio:
    monitoring_enabled: true
    external_access: true
    description: "Certificate Authority - issues signing certificates"
    
  rekor:
    monitoring_enabled: true
    external_access: true
    search_ui_enabled: true
    backfill_enabled: true
    description: "Transparency Log - records all signatures"
    
  trillian:
    monitoring_enabled: true
    database_create: true
    description: "Backend Database - stores transparency log data"
    
  ctlog:
    monitoring_enabled: true
    description: "Certificate Transparency Log"
    
  tsa:
    monitoring_enabled: true
    ntp_monitoring_enabled: true
    external_access: true
    description: "Timestamp Authority - provides cryptographic timestamps"
    
  tuf:
    external_access: true
    description: "The Update Framework - distributes public keys"

operators:
  rhtas:
    name: "rhtas-operator"
    namespace: "openshift-operators"
    channel: "stable"
    source: "redhat-operators"
    sourceNamespace: "openshift-marketplace"
    
  grafana:
    name: "grafana-operator"
    namespace: "openshift-operators" 
    channel: "v5"
    source: "community-operators"
    sourceNamespace: "openshift-marketplace"

monitoring:
  enabled: true
  grafana:
    instance_name: "tas-grafana"
    admin_user: "{{ grafana_admin_user | default('admin') }}"
    admin_password: "{{ grafana_admin_password | default('admin') }}"
    route_name: "tas-grafana-route"
    service_account: "grafana-reader"
    token_duration: "720h"
  
  datasource:
    name: "tas-prometheus"
    prometheus_url: "https://prometheus-k8s.openshift-monitoring.svc.cluster.local:9091"
    time_interval: "5s"
    
  dashboard:
    name: "tas-performance-kpis"
    title: "TAS Performance Dashboard - KPIs"
    refresh_interval: "5s"
    time_range: "15m"
    k6_job_name: "verifying|signing"